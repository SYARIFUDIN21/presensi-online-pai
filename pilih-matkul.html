<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Pilih Mata Kuliah</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --primary:#2563eb;
  --secondary:#22c55e;
  --text:#0f172a;
  --muted:#64748b;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Inter','Segoe UI',Arial,sans-serif;
}

body{
  min-height:100vh;
  background:linear-gradient(135deg,#eef2ff,#f8fafc);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

/* CARD */
.card{
  position:relative;
  z-index:1;
  width:100%;
  max-width:380px;
  padding:30px 26px;
  border-radius:18px;
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(14px);
  box-shadow:
    0 20px 40px rgba(15,23,42,.12),
    inset 0 1px 0 rgba(255,255,255,.4);
  text-align:center;
  animation:fadeUp .6s ease;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

/* HEADER */
.logo{
  width:110px;
  margin-bottom:12px;
}

.title{
  font-size:15px;
  font-weight:700;
  color:var(--text);
}

.subtitle{
  font-size:13px;
  color:var(--muted);
  margin-bottom:18px;
}

/* SELECT */
select{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #e2e8f0;
  font-size:14px;
  background:#fff;
  outline:none;
  transition:.2s;
}

select:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(37,99,235,.15);
}

/* INFO */
.info{
  margin-top:14px;
  padding:12px;
  border-radius:12px;
  background:#f1f5f9;
  font-size:13px;
  color:var(--text);
}

.info span{
  display:block;
  margin-top:4px;
  font-weight:600;
}

/* BUTTONS */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:14px;
  font-weight:700;
  cursor:pointer;
  transition:.2s;
}

.btn-primary{
  margin-top:16px;
  background:linear-gradient(135deg,#2563eb,#1d4ed8);
  color:#fff;
  box-shadow:0 10px 20px rgba(37,99,235,.35);
}

.btn-primary:hover{
  transform:translateY(-1px);
  box-shadow:0 14px 26px rgba(37,99,235,.45);
}

.btn-secondary{
  margin-top:10px;
  background:#e2e8f0;
  color:#0f172a;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<div class="card">

  <img src="assets/logo-paic-2023.jpg.jpeg" class="logo">

  <div class="title">Presensi Perkuliahan Online</div>
  <div class="subtitle">PAI C 2023 · IAINU Kebumen</div>

  <!-- PILIH MATKUL -->
  <select id="matkulSelect">
    <option value="">— Pilih Mata Kuliah —</option>
  </select>

  <!-- DOSEN -->
  <div class="info">
    Dosen Pengampu
    <span id="dosen">-</span>
  </div>

  <button class="btn-primary" onclick="ikutiKelas()">Ikuti Kelas</button>
  <button class="btn-secondary" onclick="history.back()">Kembali</button>

</div>

<script>
/* ===============================
   DEFAULT DATA (JALAN TANPA ADMIN)
================================ */
const DEFAULT_MATKUL = [
  { nama:"Psikologi Pendidikan", dosen:"Syukron Makmun, M.Pd" },
  { nama:"Pembelajaran Fiqih", dosen:"Ahmad Fauzi, M.Pd" },
  { nama:"Microteaching", dosen:"Dr. Maryanto, M.Pd" }
];

/* AMBIL DATA ADMIN JIKA ADA */
const daftarMatkul =
  JSON.parse(localStorage.getItem("daftarMatkul"))
  || DEFAULT_MATKUL;

const select = document.getElementById("matkulSelect");
const dosenEl = document.getElementById("dosen");

/* ISI DROPDOWN */
daftarMatkul.forEach((m,i)=>{
  const opt = document.createElement("option");
  opt.value = i;
  opt.textContent = m.nama;
  select.appendChild(opt);
});

/* PILIH MATKUL */
select.addEventListener("change",()=>{
  const i = select.value;
  if(i===""){
    dosenEl.textContent="-";
    return;
  }

  const m = daftarMatkul[i];
  dosenEl.textContent = m.dosen;

  localStorage.setItem("matkulAktif", m.nama);
  localStorage.setItem("dosenAktif", m.dosen);

  const key = "pertemuan_"+m.nama;
  if(!localStorage.getItem(key)){
    localStorage.setItem(key,1);
  }
});

/* LANJUT */
function ikutiKelas(){
  if(select.value===""){
    alert("Pilih mata kuliah dulu");
    return;
  }
  window.location.href="kelas-perkuliahan.html";
}

/* BACKGROUND GERAK */
const c=document.getElementById("bg"),x=c.getContext("2d");
let w,h;function r(){w=c.width=innerWidth;h=c.height=innerHeight}
addEventListener("resize",r);r();
let d=[...Array(70)].map(()=>({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-.5)*.4,vy:(Math.random()-.5)*.4}));
(function a(){
 x.clearRect(0,0,w,h);
 d.forEach((p,i)=>{
  p.x+=p.vx;p.y+=p.vy;
  if(p.x<0||p.x>w)p.vx*=-1;
  if(p.y<0||p.y>h)p.vy*=-1;
  x.beginPath();x.arc(p.x,p.y,2,0,7);x.fillStyle="#c7d2fe";x.fill();
  d.slice(i+1).forEach(q=>{
    let l=Math.hypot(p.x-q.x,p.y-q.y);
    if(l<120){
      x.beginPath();x.moveTo(p.x,p.y);x.lineTo(q.x,q.y);
      x.strokeStyle="rgba(199,210,254,.35)";
      x.stroke();
    }
  });
 });
 requestAnimationFrame(a);
})();
</script>

</body>
</html>
