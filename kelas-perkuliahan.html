<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kelas Perkuliahan | Presensi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --primary:#2563eb;
  --text:#0f172a;
  --muted:#64748b;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Inter','Segoe UI',Arial,sans-serif;
}

body{
  min-height:100vh;
  background:linear-gradient(135deg,#eef2ff,#f8fafc);
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:20px 0;
  overflow-y:auto;
}

canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

/* CARD */
.card{
  position:relative;
  z-index:1;
  width:100%;
  max-width:400px;
  padding:28px 26px;
  border-radius:20px;
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(14px);
  box-shadow:
    0 20px 40px rgba(15,23,42,.12),
    inset 0 1px 0 rgba(255,255,255,.4);
  text-align:center;
  animation:fadeUp .5s ease;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

/* HEADER */
.logo{
  width:110px;
  margin-bottom:10px;
}

.title{
  font-size:15px;
  font-weight:700;
  color:var(--text);
  margin-bottom:16px;
}

/* INFO BOX */
.info{
  border-radius:14px;
  background:#f1f5f9;
  padding:12px 14px;
  font-size:13px;
  margin-bottom:12px;
  text-align:left;
}

.info b{
  display:block;
  font-size:12px;
  color:var(--muted);
  margin-bottom:4px;
}

.info span{
  font-weight:600;
  color:var(--text);
}

/* INPUT */
.input-group{
  display:flex;
  align-items:center;
  gap:10px;
  background:#fff;
  border:1px solid #e2e8f0;
  border-radius:14px;
  padding:12px;
  margin:14px 0;
}

.input-group input{
  border:none;
  outline:none;
  width:100%;
  font-size:14px;
}

/* BUTTON */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:14px;
  font-weight:700;
  cursor:pointer;
  transition:.2s;
}

.btn-primary{
  background:linear-gradient(135deg,#2563eb,#1d4ed8);
  color:#fff;
  box-shadow:0 10px 20px rgba(37,99,235,.35);
}

.btn-primary:hover{
  transform:translateY(-1px);
  box-shadow:0 14px 26px rgba(37,99,235,.45);
}

.btn-secondary{
  margin-top:10px;
  background:#e2e8f0;
  color:#0f172a;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<div class="card">

  <img src="assets/logo-paic-2023.jpg.jpeg" class="logo">

  <div class="title">
    PRESENSI PERKULIAHAN ONLINE<br>
    IAINU KEBUMEN
  </div>

  <div class="info">
    <b>Mata Kuliah / Pertemuan</b>
    <span id="mkPertemuan"></span>
  </div>

  <div class="info">
    <b>Kelas / Semester</b>
    <span>PAI C 2023 / 6</span>
  </div>

  <div class="info">
    <b>Dosen Pengampu</b>
    <span id="dosen"></span>
  </div>

  <div class="info">
    <b>Tanggal</b>
    <span id="tanggal"></span>
  </div>

  <div class="input-group">
    ðŸ‘¤
    <input type="text" id="pj" placeholder="Penanggung Jawab">
  </div>

  <button class="btn-primary" onclick="lanjut()">Lanjut Absensi</button>
  <button class="btn-secondary" onclick="history.back()">Kembali</button>

</div>

<script>
/* ================= DEFAULT SAFETY (ANTI ERROR) ================= */
if(!localStorage.getItem("matkulAktif")){
  localStorage.setItem("matkulAktif","Psikologi Pendidikan");
}
if(!localStorage.getItem("dosenAktif")){
  localStorage.setItem("dosenAktif","Syukron Makmun, M.Pd");
}

/* ================= DATA ================= */
const matkul = localStorage.getItem("matkulAktif");
const dosen  = localStorage.getItem("dosenAktif");

/* PERTEMUAN PER MATKUL */
const keyPertemuan = "pertemuan_" + matkul;
let pertemuan = Number(localStorage.getItem(keyPertemuan)) || 1;

/* TANGGAL */
const tanggal = new Date().toLocaleDateString("id-ID",{
  weekday:"long",
  day:"numeric",
  month:"long",
  year:"numeric"
});

/* TAMPILKAN */
document.getElementById("mkPertemuan").innerText =
  `${matkul} Â· Pertemuan Ke-${pertemuan}`;
document.getElementById("dosen").innerText = dosen;
document.getElementById("tanggal").innerText = tanggal;

/* LANJUT */
function lanjut(){
  const pj=document.getElementById("pj").value.trim();
  if(!pj){
    alert("Isi penanggung jawab dulu");
    return;
  }
  localStorage.setItem("pj",pj);
  window.location.href="absensi.html";
}

/* BACKGROUND GERAK */
const c=document.getElementById("bg"),x=c.getContext("2d");
let w,h;function r(){w=c.width=innerWidth;h=c.height=innerHeight}
addEventListener("resize",r);r();
let d=[...Array(70)].map(()=>({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-.5)*.4,vy:(Math.random()-.5)*.4}));
(function a(){
 x.clearRect(0,0,w,h);
 d.forEach((p,i)=>{
  p.x+=p.vx;p.y+=p.vy;
  if(p.x<0||p.x>w)p.vx*=-1;
  if(p.y<0||p.y>h)p.vy*=-1;
  x.beginPath();x.arc(p.x,p.y,2,0,7);x.fillStyle="#c7d2fe";x.fill();
  d.slice(i+1).forEach(q=>{
    let l=Math.hypot(p.x-q.x,p.y-q.y);
    if(l<120){
      x.beginPath();x.moveTo(p.x,p.y);x.lineTo(q.x,q.y);
      x.strokeStyle="rgba(199,210,254,.35)";
      x.stroke();
    }
  });
 });
 requestAnimationFrame(a);
})();
</script>

</body>
</html>
